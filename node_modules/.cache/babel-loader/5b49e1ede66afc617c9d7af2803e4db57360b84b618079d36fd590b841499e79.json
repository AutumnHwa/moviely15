{"ast":null,"code":"import React,{useState}from'react';import{Link}from'react-router-dom';import FullCalendar from'@fullcalendar/react';import dayGridPlugin from'@fullcalendar/daygrid';import interactionPlugin from'@fullcalendar/interaction';import Popcal from'./Popcal';import'../css/MycalPage.css';import logoImage from'../logo.png';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MycalPage(){const[isPopupOpen,setIsPopupOpen]=useState(false);const[selectedDate,setSelectedDate]=useState(null);const[selectedEvent,setSelectedEvent]=useState(null);const[events,setEvents]=useState([]);const handleDateClick=_ref=>{let{dateStr}=_ref;setSelectedDate(dateStr);setSelectedEvent(null);setIsPopupOpen(true);};const handleRecordButtonClick=()=>{setSelectedDate(new Date().toISOString().split('T')[0]);setSelectedEvent(null);setIsPopupOpen(true);};const handleClosePopup=()=>{setIsPopupOpen(false);};const handleSaveMovieData=movieData=>{const eventDetails={id:selectedEvent?selectedEvent.id:Date.now().toString(),// Ensure unique ID\ntitle:movieData.movie_title,start:movieData.watch_date||selectedDate,allDay:true,extendedProps:{movie_content:movieData.movie_content}};const updatedEvents=selectedEvent?events.map(event=>event.id===selectedEvent.id?eventDetails:event):[...events,eventDetails];setEvents(updatedEvents);setIsPopupOpen(false);};const handleEventClick=_ref2=>{let{event}=_ref2;setSelectedDate(event.startStr);setSelectedEvent({id:event.id,title:event.title,start:event.startStr,movie_content:event.extendedProps.movie_content});setIsPopupOpen(true);};const handleDeleteEvent=eventId=>{const updatedEvents=events.filter(event=>event.id!==eventId);setEvents(updatedEvents);};return/*#__PURE__*/_jsxs(\"div\",{className:\"mycalPage\",children:[/*#__PURE__*/_jsx(\"img\",{src:logoImage,alt:\"Logo\",className:\"myPageLogo\"}),/*#__PURE__*/_jsx(\"div\",{className:\"myPageTitle\",children:\"\\uB9C8\\uC774\\uD398\\uC774\\uC9C0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"navButtons\",children:[/*#__PURE__*/_jsx(Link,{to:\"/my/watched\",className:\"navButton\",children:\"\\uC774\\uBBF8 \\uBCF8 \\uC601\\uD654\"}),/*#__PURE__*/_jsx(Link,{to:\"/my/wishlist\",className:\"navButton\",children:\"\\uBCF4\\uACE0\\uC2F6\\uC740 \\uC601\\uD654\"}),/*#__PURE__*/_jsx(Link,{to:\"/my/calendar\",className:\"navButton active\",children:\"MOVIELY \\uCE98\\uB9B0\\uB354\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRecordButtonClick,className:\"recordButton\",children:\"\\uC601\\uD654 \\uAD00\\uB78C \\uAE30\\uB85D\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"div\",{className:\"calendar-container\",children:/*#__PURE__*/_jsx(FullCalendar,{plugins:[dayGridPlugin,interactionPlugin],initialView:\"dayGridMonth\",dateClick:handleDateClick,eventClick:handleEventClick,events:events,height:\"470px\"},events.length)}),isPopupOpen&&/*#__PURE__*/_jsx(Popcal,{isOpen:isPopupOpen,onClose:handleClosePopup,onSave:handleSaveMovieData,onDelete:handleDeleteEvent,initialData:selectedEvent})]});}export default MycalPage;","map":{"version":3,"names":["React","useState","Link","FullCalendar","dayGridPlugin","interactionPlugin","Popcal","logoImage","jsx","_jsx","jsxs","_jsxs","MycalPage","isPopupOpen","setIsPopupOpen","selectedDate","setSelectedDate","selectedEvent","setSelectedEvent","events","setEvents","handleDateClick","_ref","dateStr","handleRecordButtonClick","Date","toISOString","split","handleClosePopup","handleSaveMovieData","movieData","eventDetails","id","now","toString","title","movie_title","start","watch_date","allDay","extendedProps","movie_content","updatedEvents","map","event","handleEventClick","_ref2","startStr","handleDeleteEvent","eventId","filter","className","children","src","alt","to","onClick","plugins","initialView","dateClick","eventClick","height","length","isOpen","onClose","onSave","onDelete","initialData"],"sources":["/Users/autumn/Desktop/moviely/moviely/src/pages/MycalPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport FullCalendar from '@fullcalendar/react';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport interactionPlugin from '@fullcalendar/interaction';\nimport Popcal from './Popcal';\nimport '../css/MycalPage.css';\nimport logoImage from '../logo.png';\n\nfunction MycalPage() {\n  const [isPopupOpen, setIsPopupOpen] = useState(false);\n  const [selectedDate, setSelectedDate] = useState(null);\n  const [selectedEvent, setSelectedEvent] = useState(null);\n  const [events, setEvents] = useState([]);\n\n  const handleDateClick = ({ dateStr }) => {\n    setSelectedDate(dateStr);\n    setSelectedEvent(null);\n    setIsPopupOpen(true);\n  };\n\n  const handleRecordButtonClick = () => {\n    setSelectedDate(new Date().toISOString().split('T')[0]);\n    setSelectedEvent(null);\n    setIsPopupOpen(true);\n  };\n\n  const handleClosePopup = () => {\n    setIsPopupOpen(false);\n  };\n\n  const handleSaveMovieData = (movieData) => {\n    const eventDetails = {\n      id: selectedEvent ? selectedEvent.id : Date.now().toString(), // Ensure unique ID\n      title: movieData.movie_title,\n      start: movieData.watch_date || selectedDate,\n      allDay: true,\n      extendedProps: {\n        movie_content: movieData.movie_content\n      }\n    };\n\n    const updatedEvents = selectedEvent\n      ? events.map(event => event.id === selectedEvent.id ? eventDetails : event)\n      : [...events, eventDetails];\n\n    setEvents(updatedEvents);\n    setIsPopupOpen(false);\n  };\n\n  const handleEventClick = ({ event }) => {\n    setSelectedDate(event.startStr);\n    setSelectedEvent({\n      id: event.id,\n      title: event.title,\n      start: event.startStr,\n      movie_content: event.extendedProps.movie_content\n    });\n    setIsPopupOpen(true);\n  };\n\n  const handleDeleteEvent = (eventId) => {\n    const updatedEvents = events.filter(event => event.id !== eventId);\n    setEvents(updatedEvents);\n  };\n\n  return (\n    <div className=\"mycalPage\">\n      <img src={logoImage} alt=\"Logo\" className=\"myPageLogo\" />\n      <div className=\"myPageTitle\">마이페이지</div>\n      <div className=\"navButtons\">\n        <Link to=\"/my/watched\" className=\"navButton\">이미 본 영화</Link>\n        <Link to=\"/my/wishlist\" className=\"navButton\">보고싶은 영화</Link>\n        <Link to=\"/my/calendar\" className=\"navButton active\">MOVIELY 캘린더</Link>\n      </div>\n      <button onClick={handleRecordButtonClick} className=\"recordButton\">\n        영화 관람 기록하기\n      </button>\n      <div className=\"calendar-container\">\n        <FullCalendar\n          key={events.length}\n          plugins={[dayGridPlugin, interactionPlugin]}\n          initialView=\"dayGridMonth\"\n          dateClick={handleDateClick}\n          eventClick={handleEventClick}\n          events={events}\n          height=\"470px\"\n        />\n      </div>\n      {isPopupOpen && (\n        <Popcal\n          isOpen={isPopupOpen}\n          onClose={handleClosePopup}\n          onSave={handleSaveMovieData}\n          onDelete={handleDeleteEvent}\n          initialData={selectedEvent}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default MycalPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}